节点：标签事件触发器
==


在很多场合，我们通过定时器获取需要的实时标签数据，然后进行后续处理。但此场景不能满足如下情景：一些现场信号的变化，代表了某种特定事件，必须每次都进行记录。如果使用定时器进行采样，极有可能丢失数据。

IOT-Tree内部的数据标签Tag，针对这种情况，可以通过定义标签的事件，对这种变化进行捕获。

本节点通过选择标签中的事件进行配置，监听相关标签在运行过程中值变化产生的事件，并根据一定策略产生事件消息触发输出。




### 参数设置

双击可以打开节点参数设置对话框

#### 输出模式


当监听到事件触发或释放时，节点可以有三种消息输出模式：

1. 触发输出：当事件触发时输出消息;

2. 释放输出：当产生的事件释放时输出消息;

3. 触发释放都输出：当事件触发和释放时，都会有消息输出；此时，节点会有两个输出点，第一个是触发时输出，第二个是释放时输出消息；



#### 标签事件


通过勾选标签下对应的事件定义，就可以使得此节点能够监听处理事件的触发和释放。



### 输出负载payload格式

1. 触发消息格式

```
"payload": {
		"trigger_dt": 1717996146986,
		"triggered": true,
		"evt_tp": "val_gt",
		"evt_prompt": "water high",
		"evt_id": "00LX8IJQY200010",
		"tag_id": "r17",
		"evt_tpt": "Val >",
		"tag_path": "ch1.aio.wl_val",
		"tag_val": 4.049375
	}
```

2. 释放消息格式

```
"payload": {
    "trigger_dt": 1717996146986,
    "evt_tp": "val_gt",
    "evt_prompt": "water high",
    "evt_id": "00LX8IJQY200010",
    "tag_id": "r17",
    "release_dt": 1717996174791,
    "evt_tpt": "Val >",
    "tag_path": "ch1.aio.wl_val",
    "tag_val": 3.6294272,
    "released": true
	}
```
